function Audijo(n){function k(){return n=n||{},g(),d(),nt(),i}function d(){function f(){if(n.preload===undefined)return"auto";if(n.preload.constructor!==String)throw"Preload parameter must be a string.";if(-1===["none","auto","metadata"].indexOf(n.preload))throw'Preload parameter must be "none", "auto" or "metadata".';return n.preload}var i,r={},u={};t.id="audio-"+pt(),t.audio=document.createElement("audio"),t.audio.autoplay===undefined?(t.swf=document.createElement("div"),t.swf.setAttribute("id",t.id),document.documentElement.appendChild(t.swf),i={id:t.id,style:"position: fixed; top: -100px;"},r={audijoId:t.id},u={allowScriptAccess:"always"},swfobject.embedSWF("swf/audijo.swf",t.id,"50","50","9.0.0",!1,r,u,i,function(n){t.swf=n.ref}),Audijo.registerSwfAudio(t),t.audio=null):(t.audio.setAttribute("id",t.id),t.audio.autoplay=n.autoplay,t.audio.controls=n.controls,t.audio.loop=n.loop,t.audio.preload=f(),t.audio.addEventListener("canplay",function(){console.log("Canplay now!")}),document.documentElement.appendChild(t.audio),b())}function g(){t={audio:null,externalInterfaceLoaded:!1,fireCallback:b,id:null,swf:null}}function nt(){i={buffered:null,bufferedPercentage:v,bufferedScalar:o,bufferedSeconds:f,played:null,playedPercentage:p,playedScalar:s,playedSeconds:h,duration:e,pause:ft,play:y,seek:null,seekPercentage:w,seekScalar:c,seekSeconds:l,source:a},at(n.returnUnit||r.Seconds)}function v(){return o()*100}function o(){var n=e();return n===0?0:f()/n}function f(){return u(tt,it)}function tt(){return t.audio.buffered.length>0?t.audio.buffered.end(0):0}function it(){return t.externalInterfaceLoaded?t.swf.buffered():0}function e(){return u(rt,ut)}function rt(){return isNaN(t.audio.duration)?0:t.audio.duration}function ut(){return t.externalInterfaceLoaded?t.swf.duration():0}function ft(){console.log("Paused"),u(et,ot)}function et(){t.audio.pause()}function ot(){t.externalInterfaceLoaded&&t.swf.pauseAudio()}function y(n){n&&a(n),console.log("Start playing."),u(st,ht)}function st(){t.audio.play()}function ht(){t.externalInterfaceLoaded&&t.swf.playAudio()}function p(){return s()*100}function s(){var n=e();return n===0?0:h()/n}function h(){return u(ct,lt)}function ct(){return t.audio.currentTime}function lt(){return t.externalInterfaceLoaded?t.swf.played():0}function at(n){switch(n){case r.Percentage:i.buffered=v,i.played=p,i.seek=w;break;case r.Scalar:i.buffered=o,i.played=s,i.seek=c;break;case r.Seconds:i.buffered=f,i.played=h,i.seek=l;break;default:throw'Unit can only be "'+r.Seconds+'" or "'+r.Scalar+'"';}}function w(n){c(n/100)}function c(n){l(n*e())}function l(n){n<0?n=0:n>f()&&(n=f()),u(vt,yt,n)}function vt(n){t.audio.currentTime=n}function yt(n){t.externalInterfaceLoaded&&t.swf.seekAudio(n)}function a(n){var i,r,u=n.substr(n.length-4,4);(u===".mp3"||u===".ogg")&&(n=n.substr(0,n.length-4)),t.audio?(i=document.createElement("source"),i.setAttribute("src",n+".mp3"),i.setAttribute("type","audio/mpeg"),r=document.createElement("source"),r.setAttribute("src",n+".ogg"),r.setAttribute("type","audio/ogg"),t.audio.innerHTML="",t.audio.appendChild(i),t.audio.appendChild(r),t.audio.load()):t.swf.source(n+".mp3")}function b(){n.src&&a(n.src),n.autoplay&&y(),n.callback&&n.callback()}function u(n,i,r){return(t.audio?n:i)(r)}function pt(){return Audijo.uniqId=Audijo.uniqId||0,++Audijo.uniqId}var t,i,r={Percentage:"percentage",Seconds:"seconds",Scalar:"scalar"};return k()}Audijo.loaded=function(n){var t=Audijo.swfs[n];t.externalInterfaceLoaded=!0,t.fireCallback()},Audijo.registerSwfAudio=function(n){Audijo.swfs[n.id]=n},Audijo.swfs={};